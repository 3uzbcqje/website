<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie List</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        label {
            font-weight: bold;
            color: #555;
        }

        input[type="text"], select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        input[type="text"] {
            width: 250px;
        }

        select {
            width: 150px;
        }

        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .movie-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .movie-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .movie-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .movie-rating {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .movie-rating.no-rating {
            background: #999;
        }

        .movie-review {
            font-style: italic;
            color: #666;
            margin-top: 10px;
            line-height: 1.4;
        }

        .movie-count {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
        }

        .rating-0 { background: #d32f2f; }
        .rating-1 { background: #f44336; }
        .rating-2 { background: #ff9800; }
        .rating-3 { background: #ffeb3b; color: #333; }
        .rating-4 { background: #4caf50; }
        .rating-5 { background: #2e7d32; }
    </style>
</head>
<body>
    <h1>Movie List</h1>

    <div class="controls">
        <div class="control-group">
            <label for="searchInput">Search by Title:</label>
            <input type="text" id="searchInput" placeholder="Enter movie title...">
        </div>

        <div class="control-group">
            <label for="ratingFilter">Filter by Rating:</label>
            <select id="ratingFilter">
                <option value="">All Ratings</option>
                <option value="0">0 - Terrible</option>
                <option value="1">1 - Bad</option>
                <option value="2">2 - Below Average</option>
                <option value="3">3 - Average</option>
                <option value="4">4 - Good</option>
                <option value="5">5 - Excellent</option>
                <option value="unrated">Unrated</option>
            </select>
        </div>

        <div class="control-group">
            <label for="sortBy">Sort By:</label>
            <select id="sortBy">
                <option value="title-asc">Title (A-Z)</option>
                <option value="title-desc">Title (Z-A)</option>
                <option value="rating-desc">Rating (High to Low)</option>
                <option value="rating-asc">Rating (Low to High)</option>
            </select>
        </div>
    </div>

    <div class="movie-count" id="movieCount"></div>

    <div class="movie-grid" id="movieGrid"></div>

    <script>
        let movies = [];
        let filteredMovies = [];

        // Load movies from JSON file
        async function loadMovies() {
            try {
                const response = await fetch('movies.json');
                movies = await response.json();
                filteredMovies = [...movies];
                displayMovies();
            } catch (error) {
                console.error('Error loading movies:', error);
                document.getElementById('movieGrid').innerHTML = '<p>Error loading movie data. Please make sure movies.json is in the same directory.</p>';
            }
        }

        function getRatingDisplay(movie) {
            if (movie.rating === undefined || movie.rating === null) {
                return '<span class="movie-rating no-rating">Unrated</span>';
            }
            const rating = parseInt(movie.rating);
            const ratingText = `${rating}/5`;
            return `<span class="movie-rating rating-${rating}">${ratingText}</span>`;
        }

        function displayMovies() {
            const movieGrid = document.getElementById('movieGrid');
            const movieCount = document.getElementById('movieCount');

            if (filteredMovies.length === 0) {
                movieGrid.innerHTML = '<p>No movies found matching your criteria.</p>';
                movieCount.textContent = 'No movies found';
                return;
            }

            movieCount.textContent = `Showing ${filteredMovies.length} of ${movies.length} movies`;

            movieGrid.innerHTML = filteredMovies.map(movie => {
                let html = `
                    <div class="movie-card">
                        <div class="movie-title">${movie._title}</div>
                        ${getRatingDisplay(movie)}
                `;

                if (movie.review) {
                    html += `<div class="movie-review">${movie.review}</div>`;
                }

                html += '</div>';
                return html;
            }).join('');
        }

        function filterMovies() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const ratingFilter = document.getElementById('ratingFilter').value;

            filteredMovies = movies.filter(movie => {
                // Title filter
                const titleMatch = !searchTerm ||
                    movie._title.toLowerCase().includes(searchTerm);

                // Rating filter
                let ratingMatch = true;
                if (ratingFilter === 'unrated') {
                    ratingMatch = movie.rating === undefined || movie.rating === null;
                } else if (ratingFilter !== '') {
                    ratingMatch = movie.rating === ratingFilter;
                }

                return titleMatch && ratingMatch;
            });

            sortMovies();
            displayMovies();
        }

        function sortMovies() {
            const sortBy = document.getElementById('sortBy').value;

            filteredMovies.sort((a, b) => {
                switch (sortBy) {
                    case 'title-asc':
                        return a._title.localeCompare(b._title);
                    case 'title-desc':
                        return b._title.localeCompare(a._title);
                    case 'rating-desc':
                        const ratingA = a.rating === undefined ? -1 : parseInt(a.rating);
                        const ratingB = b.rating === undefined ? -1 : parseInt(b.rating);
                        return ratingB - ratingA;
                    case 'rating-asc':
                        const ratingA2 = a.rating === undefined ? -1 : parseInt(a.rating);
                        const ratingB2 = b.rating === undefined ? -1 : parseInt(b.rating);
                        return ratingA2 - ratingB2;
                    default:
                        return 0;
                }
            });
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', filterMovies);
        document.getElementById('ratingFilter').addEventListener('change', filterMovies);
        document.getElementById('sortBy').addEventListener('change', () => {
            sortMovies();
            displayMovies();
        });

        // Initialize the page
        loadMovies();
    </script>
</body>
</html>
